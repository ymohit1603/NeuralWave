{
  "permissions": {
    "allow": [
      "Bash(npx tsc:*)",
      "Bash(npm run build)",
      "Bash(dir:*)",
      "Bash(npm install:*)",
      "Bash(\"C:/Users/rohit/Downloads/apps/webapp/8d/src/components/AuthModal.tsx\" << 'ENDOFFILE'\n'use client';\n\nimport { useState } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { Brain, Loader2, Mail, AlertCircle } from 'lucide-react';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\n\ninterface AuthModalProps {\n  open: boolean;\n  onClose: \\(\\) => void;\n  mode?: 'signup' | 'login';\n  title?: string;\n  description?: string;\n}\n\nexport function AuthModal\\({\n  open,\n  onClose,\n  mode: initialMode = 'signup',\n  title,\n  description\n}: AuthModalProps\\) {\n  const { signInWithGoogle, signInWithEmail, signUpWithEmail } = useAuth\\(\\);\n  const [loading, setLoading] = useState\\(false\\);\n  const [provider, setProvider] = useState<'google' | 'email' | null>\\(null\\);\n  const [mode, setMode] = useState<'signup' | 'login'>\\(initialMode\\);\n  const [showEmailForm, setShowEmailForm] = useState\\(false\\);\n  const [email, setEmail] = useState\\(''\\);\n  const [password, setPassword] = useState\\(''\\);\n  const [error, setError] = useState<string | null>\\(null\\);\n\n  const handleGoogleSignIn = async \\(\\) => {\n    try {\n      setLoading\\(true\\);\n      setProvider\\('google'\\);\n      setError\\(null\\);\n      await signInWithGoogle\\(\\);\n    } catch \\(err: any\\) {\n      console.error\\('Google sign in error:', err\\);\n      setError\\(err.message || 'Failed to sign in with Google. Please try again.'\\);\n      setLoading\\(false\\);\n      setProvider\\(null\\);\n    }\n  };\n\n  const handleEmailAuth = async \\(e: React.FormEvent\\) => {\n    e.preventDefault\\(\\);\n    setError\\(null\\);\n\n    if \\(!email || !password\\) {\n      setError\\('Please enter both email and password'\\);\n      return;\n    }\n\n    if \\(password.length < 6\\) {\n      setError\\('Password must be at least 6 characters'\\);\n      return;\n    }\n\n    setLoading\\(true\\);\n    setProvider\\('email'\\);\n\n    let result: { success: boolean; error?: string };\n\n    if \\(mode === 'signup'\\) {\n      result = await signUpWithEmail\\(email, password\\);\n    } else {\n      result = await signInWithEmail\\(email, password\\);\n    }\n\n    if \\(result.success\\) {\n      onClose\\(\\);\n    } else {\n      setError\\(result.error || 'Authentication failed. Please try again.'\\);\n      setLoading\\(false\\);\n      setProvider\\(null\\);\n    }\n  };\n\n  const toggleMode = \\(\\) => {\n    setMode\\(mode === 'signup' ? 'login' : 'signup'\\);\n    setShowEmailForm\\(false\\);\n    setEmail\\(''\\);\n    setPassword\\(''\\);\n    setError\\(null\\);\n  };\n\n  const handleClose = \\(\\) => {\n    setError\\(null\\);\n    setShowEmailForm\\(false\\);\n    setEmail\\(''\\);\n    setPassword\\(''\\);\n    onClose\\(\\);\n  };\n\n  const defaultTitle = mode === 'signup'\n    ? 'Create Your Account'\n    : 'Welcome Back';\n\n  const defaultDescription = mode === 'signup'\n    ? 'Sign up to save your tracks and unlock premium features'\n    : 'Sign in to access your saved tracks and settings';\n\n\n\n  return \\(\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent className=\"sm:max-w-md\" hideCloseButton ariaTitle={title || defaultTitle}>\n        <DialogHeader>\n          <div className=\"flex justify-center mb-4\">\n            <div className=\"p-3 rounded-2xl bg-primary\">\n              <Brain className=\"w-8 h-8 text-white\" />\n            </div>\n          </div>\n          <DialogTitle className=\"text-center text-2xl\">\n            {title || defaultTitle}\n          </DialogTitle>\n          <DialogDescription className=\"text-center\">\n            {description || defaultDescription}\n          </DialogDescription>\n        </DialogHeader>\n\n        {/* Error Alert */}\n        {error && \\(\n          <Alert variant=\"destructive\" className=\"mt-2\">\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertDescription>{error}</AlertDescription>\n          </Alert>\n        \\)}\n\n        {!showEmailForm ? \\(\n          <div className=\"space-y-3 mt-4\">\n            {/* Google Sign In */}\n            <Button\n              variant=\"outline\"\n              size=\"lg\"\n              onClick={handleGoogleSignIn}\n              disabled={loading}\n              className=\"w-full gap-3 h-12 text-base font-medium\"\n            >\n              {loading && provider === 'google' ? \\(\n                <Loader2 className=\"w-5 h-5 animate-spin\" />\n              \\) : \\(\n                <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                  <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\" />\n                  <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\" />\n                  <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\" />\n                  <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\" />\n                </svg>\n              \\)}\n              Continue with Google\n            </Button>\n\n            {/* Divider */}\n            <div className=\"relative\">\n              <div className=\"absolute inset-0 flex items-center\">\n                <span className=\"w-full border-t\" />\n              </div>\n              <div className=\"relative flex justify-center text-xs uppercase\">\n                <span className=\"bg-background px-2 text-muted-foreground\">\n                  Or\n                </span>\n              </div>\n            </div>\n\n            {/* Email/Password Sign In */}\n            <Button\n              variant=\"outline\"\n              size=\"lg\"\n              onClick={\\(\\) => {\n                setShowEmailForm\\(true\\);\n                setError\\(null\\);\n              }}\n              disabled={loading}\n              className=\"w-full gap-3 h-12 text-base font-medium\"\n            >\n              <Mail className=\"w-5 h-5\" />\n              Continue with Email\n            </Button>\n          </div>\n        \\) : \\(\n          <form onSubmit={handleEmailAuth} className=\"space-y-4 mt-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"you@example.com\"\n                value={email}\n                onChange={\\(e\\) => setEmail\\(e.target.value\\)}\n                disabled={loading}\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Password</Label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"••••••••\"\n                value={password}\n                onChange={\\(e\\) => setPassword\\(e.target.value\\)}\n                disabled={loading}\n                required\n                minLength={6}\n              />\n              {mode === 'signup' && \\(\n                <p className=\"text-xs text-muted-foreground\">Must be at least 6 characters</p>\n              \\)}\n            </div>\n            <div className=\"flex gap-2\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={\\(\\) => {\n                  setShowEmailForm\\(false\\);\n                  setError\\(null\\);\n                }}\n                disabled={loading}\n                className=\"flex-1\"\n              >\n                Back\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={loading}\n                className=\"flex-1 gap-2\"\n              >\n                {loading && provider === 'email' && \\(\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                \\)}\n                {mode === 'signup' ? 'Sign Up' : 'Sign In'}\n              </Button>\n            </div>\n          </form>\n        \\)}\n\n        <div className=\"mt-6 text-center\">\n          <p className=\"text-xs text-muted-foreground\">\n            By continuing, you agree to our Terms of Service and Privacy Policy\n          </p>\n        </div>\n\n        <div className=\"mt-4 text-center\">\n          <p className=\"text-sm text-muted-foreground\">\n            {mode === 'signup' ? 'Already have an account?' : \"Don't have an account?\"}{' '}\n            <button\n              onClick={toggleMode}\n              className=\"text-foreground hover:underline font-medium\"\n              disabled={loading}\n            >\n              {mode === 'signup' ? 'Sign in' : 'Sign up'}\n            </button>\n          </p>\n        </div>\n      </DialogContent>\n    </Dialog>\n  \\);\n}\nENDOFFILE)",
      "Bash(npx next build:*)"
    ]
  }
}
